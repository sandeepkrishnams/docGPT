# Use an official Python runtime as the base image
FROM python:3.9

LABEL Maintainer="rakhil kr <rakhil.kr@bridge-global.com>"

ENV TZ Asia/Kolkata
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone

# Set environment variables
ENV PYTHONUNBUFFERED 1

# Set the working directory in the container
WORKDIR /code
# Copy the project code into the container
COPY . /code/

COPY nginx.conf /etc/nginx/conf.d/default.conf

# Set the user to run the subsequent commands
USER root

WORKDIR /code/futsal-backend

RUN pip install --no-cache-dir -r requirements.txt
RUN pip install gunicorn

# Expose the port on which your Django application will run
EXPOSE 8000
EXPOSE 5432

# Run Gunicorn to serve the Django application
CMD gunicorn futsal.wsgi:application --bind 0.0.0.0:8000
